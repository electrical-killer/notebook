---
id: 1731939790
slug: /project_web/Docusaurus/deploy/1731939790
title: 迁移到腾讯云
date: 2024-11-19
authors: Electrical Killer
tags: [project, Docusaurus, deploy]
keywords: [project, Docusaurus, deploy]
---

本文记录迁移腾讯云过程, 为日后到期更换服务器提供参考

<!-- truncate -->

## 服务器配置域名&SSL证书认证

1. 购买服务器

2. 在服务器管理页面, 绑定域名, 但是解析异常, 因为我是在华为云购买的域名

    - 配置方式如参考连接[云解析 DNS 华为云注册域名如何配置为 DNSPod 的 DNS 服务器-操作指南-文档中心-腾讯云](https://cloud.tencent.com/document/product/302/105685)

    - 其中说运营商递归DNS时间为0~72刷新, 耐心等待后, 再去服务器后台的域名解析界面刷新看看是否成功解析
    - 这里注意腾讯云的接入备案, 如图, 下次买服务器就在一家买了~~~~~~~~~~~~
        - ![](./../../../../../../Pictures/Snipaste_2024-11-19_23-12-49.png)

3. 配置HTTPS

    > 因为我买的是轻量级的服务器, 只能使用平台内部的SSL证书, 因此需要到平台申请[我的证书 - SSL 证书 - 控制台](https://console.cloud.tencent.com/ssl)

    - 申请免费的SSL证书后, 到对应域名运营商去验证证书, 参考文章[手动cerbot安全访问nginx+ubuntu](https://wiki.eksnotebook.com/docs/project_web/Docusaurus/deploy/1731504861)中的“证书申请与启用”小节
    - 验证OK后, 下载, 等待FTP+nginx搭建OK后, 再上传并配置证书

4. 

## 配置ftp服务器

> - 传递ssl证书
> - 传递nginx配置文件

- 参考文章[ubuntu22.04开启ftp文件传输服务](https://wiki.eksnotebook.com/docs/subject_linux/Ubuntu/1731929367)
- 之后将需要的文件传入到服务器中, 比如图床, SSL证书
    - 正常可以使用git拉取仓库, 但是我文件不多, 直接传输, 需要配置远程的ssh密钥, 参考文章[github+ssh访问远程](https://wiki.eksnotebook.com/docs/subject_tools/Git/1731505174)
    - 可能会遇到github提交时的令牌问题, 参考文章[服务器cli提交commit失败](https://wiki.eksnotebook.com/docs/subject_tools/Git//subject_tools/Git/1732024047)
- 之后配置nginx反向代理, 参考文章
    - [手动cerbot安全访问nginx+ubuntu](https://wiki.eksnotebook.com/docs/project_web/Docusaurus/deploy/1731504861)
    - [nginx+ubuntu图床搭建](https://wiki.eksnotebook.com/docs/project_web/Docusaurus/deploy/1731504844)
- 配置OK后, 配置域名下的SSL证书, 上传到nginx配置下的指定地址


## 用户根目录创建, 给到最高操作权限

- images - 拉取github图床备份
- wiki - 拉取博客仓库并部署
- page - 拉取博客起始页
- ~~nas - 文件系统~~

## 测试图床

1. 因为目前域名解析有问题, 因此使用ip地址和nginx测试一下图床功能
    - 修改nginx配置中`/etc/nginx/conf.d/img.conf`域名为IP地址, 可以访问html主页, 但是无法访问内容资源
    - 等域名解析OK后, 再行测试
2. 

