---
id: 1731939790
slug: /project_web/Docusaurus/deploy/1731939790
title: 迁移到腾讯云
date: 2024-11-19
authors: Electrical Killer
tags: [project, Docusaurus, deploy]
keywords: [project, Docusaurus, deploy]
---

本文记录迁移腾讯云过程, 为日后到期更换服务器提供参考

<!-- truncate -->

## 服务器配置域名&SSL证书认证

1. 购买服务器

2. 在服务器管理页面, 绑定域名, 但是解析异常, 因为我是在华为云购买的域名

    - 配置方式如参考连接[云解析 DNS 华为云注册域名如何配置为 DNSPod 的 DNS 服务器-操作指南-文档中心-腾讯云](https://cloud.tencent.com/document/product/302/105685)

    - 其中说运营商递归DNS时间为0~72刷新, 耐心等待后, 再去服务器后台的域名解析界面刷新看看是否成功解析
    - 这里注意腾讯云的接入备案, 如图, 下次买服务器就在一家买了~~~~~~~~~~~~
        - <img src="https://img.eksnotebook.com/images/202411202221589.png"/>

3. 配置HTTPS

    > 因为我买的是轻量级的服务器, 只能使用平台内部的SSL证书, 因此需要到平台申请[我的证书 - SSL 证书 - 控制台](https://console.cloud.tencent.com/ssl)

    - 申请免费的SSL证书后, 到对应域名运营商去验证证书, 参考文章[手动cerbot安全访问nginx+ubuntu](/docs/project_web/Docusaurus/deploy/1731504861)中的“证书申请与启用”小节
    - 验证OK后, 下载, 等待FTP+nginx搭建OK后, 再上传并配置证书

4. 

## 配置ftp服务器

> - 传递ssl证书
> - 传递nginx配置文件

- 参考文章[ubuntu22.04开启ftp文件传输服务](/docs/subject_linux/Ubuntu/1731929367)
- 之后将需要的文件传入到服务器中, 比如SSL证书
- 之后配置nginx反向代理, 参考文章
    - [手动cerbot安全访问nginx+ubuntu](/docs/project_web/Docusaurus/deploy/1731504861)
    - [nginx+ubuntu图床搭建](/docs/project_web/Docusaurus/deploy/1731504844)
- 配置OK后, 配置域名下的SSL证书, 上传到nginx配置下的指定地址


## 目录&内容部署

### images - 拉取github图床备份

1. git拉取仓库最新内容时, 但可能会遇到github提交时的令牌问题, 参考文章[github+https的个人访问令牌](/docs/subject_tools/Git/1732107167)
2. 拉取成功后, 即可[访问测试笑脸图片](https://img.eksnotebook.com/1.png)
3. 若有问题, 继续排查nginx部署配置

### wiki - 拉取博客仓库并部署

1. pnpm包管理器安装, 参考文章[ubuntu2204安装pnpm包管理器](/docs/subject_linux/Ubuntu/1732111123)
2. 使用`npm install`安装依赖
3. 使用`pnpm build`编译
4. 之后在build目录下访问即可

###  page - 拉取博客起始页

1. 直接github拉取后, 登录域名即可访问

### ~~nas - 文件系统~~

1. 暂时不需要, 没有搞

## 域名访问

我不清楚华为云的域名解析配置是否正确, 我都等了两天了…( 最后发现, 还真是配置出的问题 )

~~干脆腾讯云又买了一个8块的域名, `.online`的, 到时候让`.com`的指向这个也可以~~
~~但是华为云需要简单配置一下, 指向`.online`的域名~~
~~买都买了, 快用上吧, 配置如下~~
~~<img src="https://img.eksnotebook.com/images/202411212320736.png"/>~~

> 最终, 这个问题解决了, 还真是我配置的顺序有问题
>
> 1. 将腾讯云的DNS域名解析服务器给到华为云
> 2. 华为云添加域名指向IP地址
> 3. 腾讯云在服务器后台, 添加域名解析
>
> 那我现在8块钱, 花的是真冤

### 备案

> 访问`eksnotebook.online`和`wiki.eksnotebook.online`, 不能访问, 腾讯云提示需要备案

<img src="https://img.eksnotebook.com/images/202411222002469.png"/>



